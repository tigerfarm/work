import { Configuration } from '../configuration';
import { PacketInterface } from '../packetinterface';
import { TwilsockImpl } from '../twilsock';
declare type Headers = {
    [id: string]: string;
};
interface Result {
    status: {
        code: number;
        status: string;
    };
    headers: Headers;
    body?: any;
}
declare class Upstream {
    private readonly config;
    private readonly transport;
    private readonly pendingMessages;
    private readonly twilsock;
    constructor(transport: PacketInterface, twilsock: TwilsockImpl, config: Configuration);
    saveMessage(message: any): Promise<Result>;
    sendPendingMessages(): void;
    rejectPendingMessages(): void;
    actualSend(message: any): Promise<Result>;
    /**
     * Send an upstream message
     * @param {string} method The upstream method
     * @param {string} url URL to send the message to
     * @param {object} [headers] The message headers
     * @param {any} [body] The message body
     * @param {string} [grant] The product grant
     * @returns {Promise<Result>} Result from remote side
     */
    send(method: string, url: string, headers?: Headers, body?: any, grant?: string): Promise<Result>;
}
export { Headers, Result, Upstream };
